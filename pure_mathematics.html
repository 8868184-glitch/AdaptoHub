<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Pure Mathematics | AdaptoHub</title>
	<link rel="stylesheet" href="styles.css">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Bai+Jamjuree:wght@400;500;600;700&display=swap" rel="stylesheet">
	<script defer src="app.js"></script>`n    <script defer src="time-tracker.js"></script>`n    <script defer src="proficiency-tracker.js"></script>
	<script defer src="dark-mode.js"></script>
	<script defer src="celebrations.js"></script>
	<script defer src="avatar-system.js"></script>
	<script defer src="quiz-animations.js"></script>
	<script defer src="smooth-animations.js"></script>
	<script defer src="loading-tips.js"></script>
	<script defer src="loading-tips-integration.js"></script>
	<script defer src="feature-integration.js"></script>
	<style>
		body { margin: 0; background: #f5f7fb; font-family: 'Bai Jamjuree', sans-serif; color: #0f1724; }
		.shell { max-width: 1200px; margin: 100px auto 60px; padding: 0 24px; }
		.hero { background: linear-gradient(135deg, #0f172a 0%, #312e81 55%, #4338ca 100%); color: #ffffff; border-radius: 16px; padding: 32px; box-shadow: 0 18px 36px rgba(17, 24, 39, 0.24); }
		.hero h1 { margin: 0 0 10px; font-size: 2rem; letter-spacing: -0.02em; }
		.hero p { margin: 0; color: #e0e7ff; }
		.tag-row { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 14px; }
		.pill { padding: 8px 12px; border-radius: 999px; background: rgba(255,255,255,0.16); color: #e0e7ff; font-weight: 700; font-size: 0.9rem; }
		.grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 18px; margin-top: 26px; }
		.card { background: #ffffff; border-radius: 14px; padding: 18px; box-shadow: 0 10px 26px rgba(0,0,0,0.06); border: 1px solid #e6e9f1; display: flex; flex-direction: column; gap: 10px; }
		.card h3 { margin: 0; color: #312e81; }
		.card p { margin: 0; color: #4b5563; line-height: 1.5; }
		.card a { align-self: flex-start; text-decoration: none; font-weight: 700; color: #312e81; padding: 8px 12px; border: 1px solid #c7d2fe; border-radius: 10px; background: #eef2ff; }
		.top-nav { display: flex; gap: 10px; align-items: center; margin: 12px 0 0; }
		.top-nav a { text-decoration: none; color: #4338ca; font-weight: 700; }
		@media (max-width: 640px) { .hero h1 { font-size: 1.6rem; } }
	</style>
	<script defer src="background-customizer.js"></script>
</head>
<body>
	<header class="top-banner">
		<div class="logo">
			<img height="45" src="assets/AdaptoHub.png" alt="AdaptoHub Logo" />
			<a class="site-title" href="index.html">AdaptoHub</a>
		</div>
		<div class="account-display" id="accountDisplayBtn" style="cursor: pointer; position: relative;">
      <span class="account-name" id="accountName">ชญฏ ชลประเสริฐสุข</span>
      <div class="account-avatar" id="accountAvatar"></div>
      
      <div id="accountDetailsDropdown" class="account-details-dropdown" style="display: none;">
        <div style="padding: 16px; border-bottom: 1px solid #e4e7eb; display: flex; justify-content: space-between; align-items: center;">
          <h3 style="margin: 0; color: #1f2933; font-size: 1rem;">Account Information</h3>
          <button onclick="document.getElementById('accountDetailsDropdown').style.display = 'none'; return false;" style="background: none; border: none; font-size: 18px; cursor: pointer; color: #636d79; padding: 0; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; transition: color 0.2s;" onmouseover="this.style.color='#1f2933'" onmouseout="this.style.color='#636d79'">âœ•</button>
        </div>
        <div style="padding: 16px;">
          <div style="margin-bottom: 16px;">
            <div style="font-size: 0.75rem; color: #8b92a9; text-transform: uppercase; font-weight: 600; margin-bottom: 6px;">Full Name</div>
            <div id="detailsDropdownName" style="color: #1f2933; font-weight: 500; font-size: 0.95rem;">ชญฏ ชลประเสริฐสุข</div>
          </div>
          <div style="margin-bottom: 16px;">
            <div style="font-size: 0.75rem; color: #8b92a9; text-transform: uppercase; font-weight: 600; margin-bottom: 6px;">Email Address</div>
            <div class="user-email" id="dropdownUserEmail">8868184@student.triamudom.ac.th</div>
          </div>
          <div style="margin-bottom: 16px;">
            <div style="font-size: 0.75rem; color: #8b92a9; text-transform: uppercase; font-weight: 600; margin-bottom: 6px;">Student ID</div>
            <div id="detailsDropdownStudentId" style="color: #1f2933; font-weight: 500; font-size: 0.95rem;">รหัสนักเรียน: 68184 | ห้อง: 665 | เลขที่: 23 | ระดับชั้น: ม.4 | โรงเรียนเตรียมอุดมศึกษา</div>
          </div>
          <div style="margin-bottom: 16px;">
            <div style="font-size: 0.75rem; color: #8b92a9; text-transform: uppercase; font-weight: 600; margin-bottom: 6px;">Authentication Provider</div>
            <div id="detailsDropdownProvider" style="color: #1f2933; font-weight: 500; font-size: 0.95rem;">magic-link</div>
          </div>
          <div style="margin-bottom: 0;">
            <div style="font-size: 0.75rem; color: #8b92a9; text-transform: uppercase; font-weight: 600; margin-bottom: 6px;">Login Date & Time</div>
            $17/2/2569 17:27:10</div>
          </div>
        </div>
      </div>
      
      <div id="profileSettingsDropdown" class="account-details-dropdown" style="display: none;">
        <div style="padding: 16px; border-bottom: 1px solid #e4e7eb; display: flex; justify-content: space-between; align-items: center;">
          <h3 style="margin: 0; color: #1f2933; font-size: 1rem;">Profile Settings</h3>
          <button onclick="document.getElementById('profileSettingsDropdown').style.display = 'none'; return false;" style="background: none; border: none; font-size: 18px; cursor: pointer; color: #636d79; padding: 0; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; transition: color 0.2s;" onmouseover="this.style.color='#1f2933'" onmouseout="this.style.color='#636d79'">âœ•</button>
        </div>
        <div style="padding: 16px;">
          <div style="margin-bottom: 20px;">
            <label style="font-size: 0.75rem; color: #8b92a9; text-transform: uppercase; font-weight: 600; margin-bottom: 6px; display: block;">Display Name</label>
            <input type="text" id="settingsDisplayName" style="width: 100%; padding: 10px; border: 1px solid #cbd5e0; border-radius: 6px; font-size: 0.95rem; color: #1f2933;" placeholder="Your display name">
          </div>
          <div style="margin-bottom: 20px;">
            <label style="font-size: 0.75rem; color: #8b92a9; text-transform: uppercase; font-weight: 600; margin-bottom: 6px; display: block;">Email Notifications</label>
            <label style="display: flex; align-items: center; cursor: pointer;">
              <input type="checkbox" id="settingsEmailNotif" style="margin-right: 8px; cursor: pointer;">
              <span style="font-size: 0.9rem; color: #1f2933;">Receive email notifications</span>
            </label>
          </div>
          <div style="margin-bottom: 20px;">
            <label style="font-size: 0.75rem; color: #8b92a9; text-transform: uppercase; font-weight: 600; margin-bottom: 6px; display: block;">Theme Preference</label>
            <select id="settingsTheme" style="width: 100%; padding: 10px; border: 1px solid #cbd5e0; border-radius: 6px; font-size: 0.95rem; color: #1f2933; cursor: pointer;">
              <option value="light">Light Mode</option>
              <option value="dark">Dark Mode</option>
              <option value="auto">Auto (System)</option>
            </select>
          </div>
          <div style="margin-bottom: 20px;">
            <label style="font-size: 0.75rem; color: #8b92a9; text-transform: uppercase; font-weight: 600; margin-bottom: 6px; display: block;">Language</label>
            <select id="settingsLanguage" style="width: 100%; padding: 10px; border: 1px solid #cbd5e0; border-radius: 6px; font-size: 0.95rem; color: #1f2933; cursor: pointer;">
              <option value="en">English</option>
              <option value="es">EspaÃ±ol</option>
              <option value="fr">FranÃ§ais</option>
              <option value="de">Deutsch</option>
            </select>
          </div>
          <div style="margin-bottom: 0;">
            <button onclick="saveProfileSettings()" style="width: 100%; padding: 12px; background: linear-gradient(135deg, #0097b2 0%, #00b8d4 100%); color: white; border: none; border-radius: 8px; font-weight: 600; font-size: 0.95rem; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">Save Settings</button>
          </div>
        </div>
      </div>
      
      <div id="learningHistoryDropdown" class="account-details-dropdown" style="display: none;">
        <div style="padding: 16px; border-bottom: 1px solid #e4e7eb; display: flex; justify-content: space-between; align-items: center;">
          <h3 style="margin: 0; color: #1f2933; font-size: 1rem;">Learning History</h3>
          <button onclick="document.getElementById('learningHistoryDropdown').style.display = 'none'; return false;" style="background: none; border: none; font-size: 18px; cursor: pointer; color: #636d79; padding: 0; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; transition: color 0.2s;" onmouseover="this.style.color='#1f2933'" onmouseout="this.style.color='#636d79'">âœ•</button>
        </div>
        <div style="padding: 16px; max-height: 400px; overflow-y: auto;">
          <div style="margin-bottom: 12px; padding: 12px; background: #f5f6f8; border-radius: 8px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
              <div style="font-weight: 600; color: #1f2933; font-size: 0.9rem;" id="learningHistoryStats">No activity recorded</div>
            </div>
            <div id="learningHistoryList" style="font-size: 0.85rem; color: #636d79;">
              <p style="margin: 0; text-align: center; padding: 20px 0; color: #8b92a9;">Start taking quizzes and challenges to build your learning history</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div id="accountDropdownMenu" class="account-dropdown-menu" style="display: none;">
      <div class="account-dropdown-header">
        <div class="user-avatar-large" id="dropdownUserAvatar"></div>
        <div class="user-info">
          <div class="user-name" id="dropdownUserName">ชญฏ ชลประเสริฐสุข</div>
          <div class="user-email" id="dropdownUserEmail">8868184@student.triamudom.ac.th</div>
          <div class="user-id" id="dropdownStudentId">รหัสนักเรียน: 68184</div>
        </div>
      </div>
      <div class="account-dropdown-divider"></div>
      <div class="account-dropdown-body">
        <a href="javascript:void(0);" class="dropdown-item" onclick="event.preventDefault(); event.stopPropagation(); setTimeout(() => showProfileSettings(), 0); return false;">âš™ï¸ Profile Settings</a>
        <a href="javascript:void(0);" class="dropdown-item" onclick="event.preventDefault(); event.stopPropagation(); setTimeout(() => showAccountDetailsPanel(), 0); return false;">ðŸ“‹ Account Details</a>
        <a href="javascript:void(0);" class="dropdown-item" onclick="event.preventDefault(); event.stopPropagation(); setTimeout(() => showLearningHistory(), 0); return false;">ðŸ“š Learning History</a>
      </div>
      <div class="account-dropdown-divider"></div>
      <div class="account-dropdown-footer">
        <button class="logout-btn" onclick="logout()">🚪 ออกจากระบบทั้งหมด</button>
      </div>
    </div>
		</header>

	<main class="shell">
		<div class="top-nav">
			<a href="mathematics.html">← Back to Mathematics dashboard</a>
		</div>
		<section class="hero">
			<h1>Pure Mathematics</h1>
			<p>Study the core theories of algebra, geometry, combinatorics, and number theory with focused subject pages.</p>
			<div class="tag-row">
				<span class="pill">Algebra</span>
				<span class="pill">Geometry</span>
				<span class="pill">Combinatorics</span>
				<span class="pill">Number theory</span>
				<span class="pill">Logic</span>
			</div>
		</section>

		<section class="grid" aria-label="Pure mathematics subjects">
			<article class="card" data-module-id="algebra">
				<h3>Algebra</h3>
				<p>Expressions, equations, functions, and structures to build symbolic fluency.</p>
				<div class="module-badge" style="font-size: 0.9rem; font-weight: 600; background: linear-gradient(135deg, #9e9e9e 0%, #757575 100%); color: white; padding: 8px 16px; border-radius: 20px;">0% avg • 0/6 units</div>
				<a href="algebra.html">Open Algebra</a>
			</article>
			<article class="card" data-module-id="geometry">
				<h3>Geometry & Topography</h3>
				<p>Euclidean, analytic, and transformational geometry with proof-focused reasoning.</p>
				<div class="module-badge" style="font-size: 0.9rem; font-weight: 600; background: linear-gradient(135deg, #9e9e9e 0%, #757575 100%); color: white; padding: 8px 16px; border-radius: 20px;">0% avg • 0/6 units</div>
				<a href="geometry.html">Open Geometry & Topography</a>
			</article>
			<article class="card" data-module-id="combinatorics">
				<h3>Combinatorics</h3>
				<p>Counting principles, permutations, combinations, and discrete structures with mastery checks.</p>
				<div class="module-badge" style="font-size: 0.9rem; font-weight: 600; background: linear-gradient(135deg, #9e9e9e 0%, #757575 100%); color: white; padding: 8px 16px; border-radius: 20px;">0% avg • 0/6 units</div>
				<a href="combinatorics.html">Open Combinatorics</a>
			</article>
			<article class="card" data-module-id="number_theory">
				<h3>Number Theory</h3>
				<p>Integers, divisibility, modular arithmetic, and classic results in arithmetic.</p>
				<div class="module-badge" style="font-size: 0.9rem; font-weight: 600; background: linear-gradient(135deg, #9e9e9e 0%, #757575 100%); color: white; padding: 8px 16px; border-radius: 20px;">0% avg • 0/6 units</div>
				<a href="number_theory.html">Open Number Theory</a>
			</article>
			<article class="card" data-module-id="logic_foundations">
				<h3>Logic & Foundations</h3>
				<p>Propositional and predicate logic, proof techniques, set theory, and axiomatic systems.</p>
				<div class="module-badge" style="font-size: 0.9rem; font-weight: 600; background: linear-gradient(135deg, #9e9e9e 0%, #757575 100%); color: white; padding: 8px 16px; border-radius: 20px;">0% avg • 0/6 units</div>
				<a href="logic_foundations.html">Open Logic & Foundations</a>
			</article>
		</section>
	</main>

	<script>
		const pureMathModules = {
			algebra: { storageKey: 'adaptohub_algebra_units', totalUnits: 6 },
			geometry: { storageKey: 'adaptohub_geometry_units', totalUnits: 6 },
			combinatorics: { storageKey: 'adaptohub_combinatorics_units', totalUnits: 6 },
			number_theory: { storageKey: 'adaptohub_numbertheory_units', totalUnits: 6 },
			logic_foundations: { storageKey: 'adaptohub_logic_units', totalUnits: 6 }
		};

		function updatePureMathBadges() {
			document.querySelectorAll('.card[data-module-id]').forEach(card => {
				const moduleId = card.getAttribute('data-module-id');
				const config = pureMathModules[moduleId];
				if (!config) return;

				const progress = JSON.parse(localStorage.getItem(config.storageKey) || '{}');
				const completed = Object.values(progress).filter(u => u.completed);
				const scores = completed.map(u => u.score).filter(s => typeof s === 'number');
				const avgScore = scores.length ? Math.round(scores.reduce((a, b) => a + b, 0) / scores.length) : 0;
				const completedCount = Math.min(completed.length, config.totalUnits);

				const badge = card.querySelector('.module-badge');
				if (!badge) return;

				if (completedCount > 0) {
					badge.textContent = `${avgScore}% avg • ${completedCount}/${config.totalUnits} units`;
					badge.style.background = 'linear-gradient(135deg, #4caf50 0%, #45a049 100%)';
					badge.style.color = 'white';
				} else {
					badge.textContent = '0% avg • 0/6 units';
					badge.style.background = 'linear-gradient(135deg, #9e9e9e 0%, #757575 100%)';
					badge.style.color = 'white';
				}
			});
		}

		document.addEventListener('DOMContentLoaded', () => {
			initializeUser();
			setTimeout(updatePureMathBadges, 100);
		});

		document.addEventListener('visibilitychange', () => {
			if (!document.hidden) updatePureMathBadges();
		});

		window.addEventListener('focus', updatePureMathBadges);
	</script>
</body>
</html>
