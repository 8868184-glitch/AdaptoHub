<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Light & Optics - AdaptoHub</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bai+Jamjuree:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        html, body {
            overflow: auto !important;
            height: auto !important;
        }

        .lesson-container {
            max-width: 900px;
            margin: 80px auto 40px;
            padding: 40px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .lesson-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #0097b2;
        }

        .lesson-header h1 {
            color: #0097b2;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .lesson-header .level-badge {
            display: inline-block;
            background: linear-gradient(135deg, #81c784 0%, #a5d6a7 100%);
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .lesson-content {
            margin-bottom: 40px;
        }

        .lesson-section {
            margin-bottom: 35px;
        }

        .lesson-section h2 {
            color: #0097b2;
            font-size: 1.8rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .lesson-section h3 {
            color: #333;
            font-size: 1.3rem;
            margin: 20px 0 10px;
        }

        .lesson-section p {
            color: #444;
            line-height: 1.8;
            margin-bottom: 15px;
            font-size: 1.05rem;
        }

        .concept-box {
            background: #e6f7fa;
            border-left: 4px solid #0097b2;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .concept-box h4 {
            color: #0097b2;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .formula-box {
            background: #fff3e0;
            border: 2px solid #ff9800;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .example-box {
            background: #f1f8f4;
            border-left: 4px solid #4caf50;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .example-box h4 {
            color: #4caf50;
            margin-bottom: 10px;
        }

        .quiz-section {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 12px;
            margin-top: 40px;
            border: 2px solid #0097b2;
        }

        .quiz-section h2 {
            color: #0097b2;
            text-align: center;
            margin-bottom: 25px;
        }

        .question {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
            border: 2px solid #e0e0e0;
        }

        .question.correct {
            border-color: #4caf50;
            background: #f1f8f4;
        }

        .question.incorrect {
            border-color: #f44336;
            background: #ffebee;
        }

        .question h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .option:hover {
            border-color: #0097b2;
            background: #e6f7fa;
        }

        .option.selected {
            border-color: #0097b2;
            background: #e6f7fa;
        }

        .option.correct {
            border-color: #4caf50;
            background: #f1f8f4;
        }

        .option.incorrect {
            border-color: #f44336;
            background: #ffebee;
        }

        .feedback {
            margin-top: 15px;
            padding: 12px;
            border-radius: 6px;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #f1f8f4;
            color: #2e7d32;
            border: 1px solid #4caf50;
        }

        .feedback.incorrect {
            background: #ffebee;
            color: #c62828;
            border: 1px solid #f44336;
        }

        .submit-quiz-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #0097b2 0%, #00b8d4 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .submit-quiz-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 151, 178, 0.4);
        }

        .submit-quiz-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .quiz-result {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #0097b2 0%, #00b8d4 100%);
            color: white;
            border-radius: 12px;
            margin-top: 20px;
            display: none;
        }

        .quiz-result.show {
            display: block;
        }

        .quiz-result h3 {
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .quiz-result p {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .next-lesson-btn {
            padding: 12px 30px;
            background: white;
            color: #0097b2;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 15px;
        }

        .next-lesson-btn:hover {
            background: #f0f0f0;
        }
    </style>
    <script defer src="background-customizer.js"></script>
</head>
<body>
    <header class="top-banner">
        <div class="logo">
            <img height="45px" src="assets/AdaptoHub.png" alt="Site Logo" />
            <a class="site-title" href="index.html">AdaptoHub</a>
        </div>
        <div class="header-controls">
            <div id="realTimeClock" style="font-weight: 500; color: #fff; margin-right: 15px; font-size: 0.9rem;"></div>
            <button id="darkModeToggle" style="background: none; border: none; cursor: pointer; font-size: 1.3rem; margin-right: 15px; padding: 5px;" title="Toggle dark mode">üåô</button>
        </div>
        <div class="account-display" id="accountDisplayBtn" style="cursor: pointer; position: relative;">
      <span class="account-name" id="accountName">‡∏ä‡∏ç‡∏è ‡∏ä‡∏•‡∏õ‡∏£‡∏∞‡πÄ‡∏™‡∏£‡∏¥‡∏ê‡∏™‡∏∏‡∏Ç</span>
      <div class="account-avatar" id="accountAvatar"></div>
      
      <div id="accountDetailsDropdown" class="account-details-dropdown" style="display: none;">
        <div style="padding: 16px; border-bottom: 1px solid #e4e7eb; display: flex; justify-content: space-between; align-items: center;">
          <h3 style="margin: 0; color: #1f2933; font-size: 1rem;">Account Information</h3>
          <button onclick="document.getElementById('accountDetailsDropdown').style.display = 'none'; return false;" style="background: none; border: none; font-size: 18px; cursor: pointer; color: #636d79; padding: 0; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; transition: color 0.2s;" onmouseover="this.style.color='#1f2933'" onmouseout="this.style.color='#636d79'">√¢≈ì‚Ä¢</button>
        </div>
        <div style="padding: 16px;">
          <div style="margin-bottom: 16px;">
            <div style="font-size: 0.75rem; color: #8b92a9; text-transform: uppercase; font-weight: 600; margin-bottom: 6px;">Full Name</div>
            <div id="detailsDropdownName" style="color: #1f2933; font-weight: 500; font-size: 0.95rem;">‡∏ä‡∏ç‡∏è ‡∏ä‡∏•‡∏õ‡∏£‡∏∞‡πÄ‡∏™‡∏£‡∏¥‡∏ê‡∏™‡∏∏‡∏Ç</div>
          </div>
          <div style="margin-bottom: 16px;">
            <div style="font-size: 0.75rem; color: #8b92a9; text-transform: uppercase; font-weight: 600; margin-bottom: 6px;">Email Address</div>
            <div class="user-email" id="dropdownUserEmail">8868184@student.triamudom.ac.th</div>
          </div>
          <div style="margin-bottom: 16px;">
            <div style="font-size: 0.75rem; color: #8b92a9; text-transform: uppercase; font-weight: 600; margin-bottom: 6px;">Student ID</div>
            <div id="detailsDropdownStudentId" style="color: #1f2933; font-weight: 500; font-size: 0.95rem;">‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô: 68184 | ‡∏´‡πâ‡∏≠‡∏á: 665 | ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà: 23 | ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô: ‡∏°.4 | ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏≠‡∏∏‡∏î‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤</div>
          </div>
          <div style="margin-bottom: 16px;">
            <div style="font-size: 0.75rem; color: #8b92a9; text-transform: uppercase; font-weight: 600; margin-bottom: 6px;">Authentication Provider</div>
            <div id="detailsDropdownProvider" style="color: #1f2933; font-weight: 500; font-size: 0.95rem;">magic-link</div>
          </div>
          <div style="margin-bottom: 0;">
            <div style="font-size: 0.75rem; color: #8b92a9; text-transform: uppercase; font-weight: 600; margin-bottom: 6px;">Login Date & Time</div>
            $17/2/2569 17:27:10</div>
          </div>
        </div>
      </div>
      
      <div id="profileSettingsDropdown" class="account-details-dropdown" style="display: none;">
        <div style="padding: 16px; border-bottom: 1px solid #e4e7eb; display: flex; justify-content: space-between; align-items: center;">
          <h3 style="margin: 0; color: #1f2933; font-size: 1rem;">Profile Settings</h3>
          <button onclick="document.getElementById('profileSettingsDropdown').style.display = 'none'; return false;" style="background: none; border: none; font-size: 18px; cursor: pointer; color: #636d79; padding: 0; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; transition: color 0.2s;" onmouseover="this.style.color='#1f2933'" onmouseout="this.style.color='#636d79'">√¢≈ì‚Ä¢</button>
        </div>
        <div style="padding: 16px;">
          <div style="margin-bottom: 20px;">
            <label style="font-size: 0.75rem; color: #8b92a9; text-transform: uppercase; font-weight: 600; margin-bottom: 6px; display: block;">Display Name</label>
            <input type="text" id="settingsDisplayName" style="width: 100%; padding: 10px; border: 1px solid #cbd5e0; border-radius: 6px; font-size: 0.95rem; color: #1f2933;" placeholder="Your display name">
          </div>
          <div style="margin-bottom: 20px;">
            <label style="font-size: 0.75rem; color: #8b92a9; text-transform: uppercase; font-weight: 600; margin-bottom: 6px; display: block;">Email Notifications</label>
            <label style="display: flex; align-items: center; cursor: pointer;">
              <input type="checkbox" id="settingsEmailNotif" style="margin-right: 8px; cursor: pointer;">
              <span style="font-size: 0.9rem; color: #1f2933;">Receive email notifications</span>
            </label>
          </div>
          <div style="margin-bottom: 20px;">
            <label style="font-size: 0.75rem; color: #8b92a9; text-transform: uppercase; font-weight: 600; margin-bottom: 6px; display: block;">Theme Preference</label>
            <select id="settingsTheme" style="width: 100%; padding: 10px; border: 1px solid #cbd5e0; border-radius: 6px; font-size: 0.95rem; color: #1f2933; cursor: pointer;">
              <option value="light">Light Mode</option>
              <option value="dark">Dark Mode</option>
              <option value="auto">Auto (System)</option>
            </select>
          </div>
          <div style="margin-bottom: 20px;">
            <label style="font-size: 0.75rem; color: #8b92a9; text-transform: uppercase; font-weight: 600; margin-bottom: 6px; display: block;">Language</label>
            <select id="settingsLanguage" style="width: 100%; padding: 10px; border: 1px solid #cbd5e0; border-radius: 6px; font-size: 0.95rem; color: #1f2933; cursor: pointer;">
              <option value="en">English</option>
              <option value="es">Espa√É¬±ol</option>
              <option value="fr">Fran√É¬ßais</option>
              <option value="de">Deutsch</option>
            </select>
          </div>
          <div style="margin-bottom: 0;">
            <button onclick="saveProfileSettings()" style="width: 100%; padding: 12px; background: linear-gradient(135deg, #0097b2 0%, #00b8d4 100%); color: white; border: none; border-radius: 8px; font-weight: 600; font-size: 0.95rem; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">Save Settings</button>
          </div>
        </div>
      </div>
      
      <div id="learningHistoryDropdown" class="account-details-dropdown" style="display: none;">
        <div style="padding: 16px; border-bottom: 1px solid #e4e7eb; display: flex; justify-content: space-between; align-items: center;">
          <h3 style="margin: 0; color: #1f2933; font-size: 1rem;">Learning History</h3>
          <button onclick="document.getElementById('learningHistoryDropdown').style.display = 'none'; return false;" style="background: none; border: none; font-size: 18px; cursor: pointer; color: #636d79; padding: 0; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; transition: color 0.2s;" onmouseover="this.style.color='#1f2933'" onmouseout="this.style.color='#636d79'">√¢≈ì‚Ä¢</button>
        </div>
        <div style="padding: 16px; max-height: 400px; overflow-y: auto;">
          <div style="margin-bottom: 12px; padding: 12px; background: #f5f6f8; border-radius: 8px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
              <div style="font-weight: 600; color: #1f2933; font-size: 0.9rem;" id="learningHistoryStats">No activity recorded</div>
            </div>
            <div id="learningHistoryList" style="font-size: 0.85rem; color: #636d79;">
              <p style="margin: 0; text-align: center; padding: 20px 0; color: #8b92a9;">Start taking quizzes and challenges to build your learning history</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div id="accountDropdownMenu" class="account-dropdown-menu" style="display: none;">
      <div class="account-dropdown-header">
        <div class="user-avatar-large" id="dropdownUserAvatar"></div>
        <div class="user-info">
          <div class="user-name" id="dropdownUserName">‡∏ä‡∏ç‡∏è ‡∏ä‡∏•‡∏õ‡∏£‡∏∞‡πÄ‡∏™‡∏£‡∏¥‡∏ê‡∏™‡∏∏‡∏Ç</div>
          <div class="user-email" id="dropdownUserEmail">8868184@student.triamudom.ac.th</div>
          <div class="user-id" id="dropdownStudentId">‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô: 68184</div>
        </div>
      </div>
      <div class="account-dropdown-divider"></div>
      <div class="account-dropdown-body">
        <a href="javascript:void(0);" class="dropdown-item" onclick="event.preventDefault(); event.stopPropagation(); setTimeout(() => showProfileSettings(), 0); return false;">√¢≈°‚Ñ¢√Ø¬∏¬è Profile Settings</a>
        <a href="javascript:void(0);" class="dropdown-item" onclick="event.preventDefault(); event.stopPropagation(); setTimeout(() => showAccountDetailsPanel(), 0); return false;">√∞≈∏‚Äú‚Äπ Account Details</a>
        <a href="javascript:void(0);" class="dropdown-item" onclick="event.preventDefault(); event.stopPropagation(); setTimeout(() => showLearningHistory(), 0); return false;">√∞≈∏‚Äú≈° Learning History</a>
      </div>
      <div class="account-dropdown-divider"></div>
      <div class="account-dropdown-footer">
        <button class="logout-btn" onclick="logout()">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
      </div>
    </div>
        </header>

    <div class="lesson-container">
        <div class="lesson-header">
            <h1>üí° Light & Optics</h1>
            <span class="level-badge">Level 3 ‚Ä¢ Physics</span>
        </div>

        <div class="lesson-content">
            <div class="lesson-section">
                <h2>üìñ The Nature of Light</h2>
                <p>
                    Light is electromagnetic radiation that is visible to the human eye. It behaves as both a wave 
                    and a particle (photon), exhibiting properties of both. Understanding light is essential to 
                    optics, vision, and modern technology.
                </p>
                <div class="concept-box">
                    <h4>What You'll Learn:</h4>
                    <p>‚úì Properties of light (reflection, refraction)<br>
                       ‚úì The electromagnetic spectrum<br>
                       ‚úì Mirrors and lenses<br>
                       ‚úì Color and the human eye</p>
                </div>
            </div>

            <div class="lesson-section">
                <h2>üéØ Properties of Light</h2>
                
                <h3>Speed of Light</h3>
                <p>
                    In a vacuum, light travels at approximately 300,000 km/s (3 √ó 10<sup>8</sup> m/s). 
                    This is the fastest speed possible in the universe.
                </p>

                <h3>Light as a Wave</h3>
                <p>
                    Light exhibits wave properties such as wavelength, frequency, and can undergo interference 
                    and diffraction.
                </p>
                <div class="formula-box">
                    c = f √ó Œª<br>
                    (speed of light = frequency √ó wavelength)
                </div>

                <h3>Light as a Particle</h3>
                <p>
                    Light also behaves as discrete packets of energy called photons. This explains phenomena 
                    like the photoelectric effect.
                </p>
            </div>

            <div class="lesson-section">
                <h2>üåà The Electromagnetic Spectrum</h2>
                
                <p>
                    Light is just one part of the electromagnetic spectrum. All electromagnetic waves travel 
                    at the speed of light but have different wavelengths and frequencies.
                </p>

                <div class="concept-box">
                    <h4>From Longest to Shortest Wavelength:</h4>
                    <p>üìª Radio Waves ‚Üí Microwaves ‚Üí Infrared ‚Üí üåà Visible Light ‚Üí Ultraviolet ‚Üí X-rays ‚Üí Gamma Rays</p>
                    <p><br><strong>Visible Light Range:</strong> Red (longest wavelength) to Violet (shortest wavelength)</p>
                </div>
            </div>

            <div class="lesson-section">
                <h2>üîÑ Reflection and Refraction</h2>
                
                <h3>Reflection</h3>
                <p>
                    When light bounces off a surface. The law of reflection states that the angle of incidence 
                    equals the angle of reflection.
                </p>
                <div class="formula-box">
                    Œ∏<sub>i</sub> = Œ∏<sub>r</sub>
                </div>

                <h3>Refraction</h3>
                <p>
                    When light changes direction as it passes from one medium to another (e.g., air to water). 
                    This bending is described by Snell's Law.
                </p>
                <div class="formula-box">
                    n<sub>1</sub> sin(Œ∏<sub>1</sub>) = n<sub>2</sub> sin(Œ∏<sub>2</sub>)
                </div>

                <div class="example-box">
                    <h4>Example:</h4>
                    <p>A straw in a glass of water appears bent due to refraction. Light changes speed and 
                    direction when moving between air and water.</p>
                </div>
            </div>

            <div class="lesson-section">
                <h2>üîç Mirrors and Lenses</h2>
                
                <h3>Mirrors</h3>
                <div class="concept-box">
                    <p><strong>Plane Mirrors:</strong> Flat surfaces that produce virtual, upright images</p>
                    <p><strong>Concave Mirrors:</strong> Curved inward, can produce real or virtual images</p>
                    <p><strong>Convex Mirrors:</strong> Curved outward, produce smaller virtual images (used in car mirrors)</p>
                </div>

                <h3>Lenses</h3>
                <div class="concept-box">
                    <p><strong>Converging Lenses (Convex):</strong> Focus light to a point (used in magnifying glasses, cameras)</p>
                    <p><strong>Diverging Lenses (Concave):</strong> Spread light outward (used in correcting nearsightedness)</p>
                </div>

                <h3>Lens Equation</h3>
                <div class="formula-box">
                    1/f = 1/d<sub>o</sub> + 1/d<sub>i</sub><br>
                    (f = focal length, d<sub>o</sub> = object distance, d<sub>i</sub> = image distance)
                </div>
            </div>

            <div class="lesson-section">
                <h2>üé® Color and Vision</h2>
                
                <p>
                    Color is determined by the wavelength of light. White light contains all visible wavelengths. 
                    Objects appear colored because they absorb some wavelengths and reflect others.
                </p>

                <div class="concept-box">
                    <h4>Primary Colors:</h4>
                    <p><strong>Additive (Light):</strong> Red, Green, Blue (RGB) - combine to make white</p>
                    <p><strong>Subtractive (Pigments):</strong> Cyan, Magenta, Yellow - combine to make black</p>
                </div>

                <p>
                    The human eye contains photoreceptors: <strong>rods</strong> (detect light intensity) and 
                    <strong>cones</strong> (detect color - red, green, blue).
                </p>
            </div>

            <div class="lesson-section">
                <h2>üåç Real-World Applications</h2>
                <p>Light and optics principles are used in:</p>
                <ul style="color: #444; line-height: 1.8; font-size: 1.05rem;">
                    <li>Cameras and photography</li>
                    <li>Eyeglasses and contact lenses</li>
                    <li>Telescopes and microscopes</li>
                    <li>Fiber optic communications</li>
                    <li>Lasers (surgery, manufacturing, entertainment)</li>
                    <li>Optical illusions and art</li>
                </ul>
            </div>
        </div>

        <div class="quiz-section">
            <h2>‚úèÔ∏è Test Your Knowledge</h2>
            <p style="text-align: center; color: #666; margin-bottom: 25px;">
                Answer these questions to demonstrate your mastery of Light & Optics
            </p>

            <div id="quizContainer"></div>

            <button class="submit-quiz-btn" id="submitQuiz">Submit Answers</button>

            <div class="quiz-result" id="quizResult"></div>
        </div>
    </div>

    <script src="app.js"></script>
    <script src="simple-avatar.js"></script>
    <script src="learning-path.js"></script>
    <script src="analytics.js"></script>
    <script src="gamification.js"></script>
    <script>
        function updateClock(){const now=new Date();const options={weekday:'short',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit',second:'2-digit'};const clockEl=document.getElementById('realTimeClock');if(clockEl)clockEl.textContent=now.toLocaleString('en-US',options);}updateClock();setInterval(updateClock,1000);const darkModeToggle=document.getElementById('darkModeToggle');const isDark=localStorage.getItem('darkMode')==='true';if(isDark){document.documentElement.setAttribute('data-theme','dark');darkModeToggle.textContent='‚òÄÔ∏è';}darkModeToggle.addEventListener('click',()=>{const currentTheme=document.documentElement.getAttribute('data-theme');if(currentTheme==='dark'){document.documentElement.setAttribute('data-theme','light');localStorage.setItem('darkMode','false');darkModeToggle.textContent='üåô';}else{document.documentElement.setAttribute('data-theme','dark');localStorage.setItem('darkMode','true');darkModeToggle.textContent='‚òÄÔ∏è';}});
    </script>
    <script>
        const questions = [
            {
                id: 1,
                question: "What is the approximate speed of light in a vacuum?",
                options: [
                    "3,000 km/s",
                    "30,000 km/s",
                    "300,000 km/s",
                    "3,000,000 km/s"
                ],
                correct: 2,
                explanation: "The speed of light in a vacuum is approximately 300,000 km/s or 3 √ó 10‚Å∏ m/s."
            },
            {
                id: 2,
                question: "According to the law of reflection, the angle of incidence:",
                options: [
                    "Is always 90 degrees",
                    "Equals the angle of reflection",
                    "Is twice the angle of reflection",
                    "Is half the angle of reflection"
                ],
                correct: 1,
                explanation: "The law of reflection states that the angle of incidence equals the angle of reflection."
            },
            {
                id: 3,
                question: "Which type of lens converges light rays to a focal point?",
                options: [
                    "Concave lens",
                    "Diverging lens",
                    "Convex lens",
                    "Plane lens"
                ],
                correct: 2,
                explanation: "A convex (converging) lens focuses light rays to a point and is used in magnifying glasses and cameras."
            },
            {
                id: 4,
                question: "What causes refraction of light?",
                options: [
                    "Light reflecting off a surface",
                    "Light changing speed when entering a different medium",
                    "Light being absorbed",
                    "Light traveling in a straight line"
                ],
                correct: 1,
                explanation: "Refraction occurs when light changes speed as it passes from one medium to another, causing it to bend."
            },
            {
                id: 5,
                question: "In the visible spectrum, which color has the longest wavelength?",
                options: [
                    "Violet",
                    "Blue",
                    "Green",
                    "Red"
                ],
                correct: 3,
                explanation: "Red light has the longest wavelength in the visible spectrum, while violet has the shortest."
            }
        ];

        let userAnswers = {};
        let quizSubmitted = false;

        function renderQuiz() {
            const container = document.getElementById('quizContainer');
            let html = '';

            questions.forEach((q, index) => {
                html += `
                    <div class="question" id="question${q.id}">
                        <h3>Question ${index + 1}</h3>
                        <p style="color: #333; margin-bottom: 15px; font-size: 1.05rem;">${q.question}</p>
                        <div class="options">
                            ${q.options.map((option, optIndex) => `
                                <div class="option" onclick="selectOption(${q.id}, ${optIndex})">
                                    <input type="radio" name="q${q.id}" id="q${q.id}_${optIndex}" style="margin-right: 10px;">
                                    <label for="q${q.id}_${optIndex}" style="cursor: pointer;">${option}</label>
                                </div>
                            `).join('')}
                        </div>
                        <div class="feedback" id="feedback${q.id}"></div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        function selectOption(questionId, optionIndex) {
            if (quizSubmitted) return;

            userAnswers[questionId] = optionIndex;

            const question = document.getElementById(`question${questionId}`);
            const options = question.querySelectorAll('.option');
            options.forEach((opt, idx) => {
                opt.classList.toggle('selected', idx === optionIndex);
                const radio = opt.querySelector('input');
                radio.checked = idx === optionIndex;
            });
        }

        function submitQuiz() {
            if (Object.keys(userAnswers).length < questions.length) {
                alert('Please answer all questions before submitting!');
                return;
            }

            quizSubmitted = true;
            let correctCount = 0;

            questions.forEach(q => {
                const userAnswer = userAnswers[q.id];
                const isCorrect = userAnswer === q.correct;
                
                if (isCorrect) correctCount++;

                const questionEl = document.getElementById(`question${q.id}`);
                const feedbackEl = document.getElementById(`feedback${q.id}`);
                const options = questionEl.querySelectorAll('.option');

                questionEl.classList.add(isCorrect ? 'correct' : 'incorrect');

                options.forEach((opt, idx) => {
                    if (idx === q.correct) {
                        opt.classList.add('correct');
                    } else if (idx === userAnswer && !isCorrect) {
                        opt.classList.add('incorrect');
                    }
                });

                feedbackEl.className = `feedback show ${isCorrect ? 'correct' : 'incorrect'}`;
                feedbackEl.innerHTML = `
                    ${isCorrect ? '‚úì Correct!' : '‚úó Incorrect.'} ${q.explanation}
                `;
            });

            const percentage = Math.round((correctCount / questions.length) * 100);
            
            const resultEl = document.getElementById('quizResult');
            resultEl.className = 'quiz-result show';
            resultEl.innerHTML = `
                <h3>${percentage >= 80 ? 'üéâ Excellent Work!' : percentage >= 60 ? 'üëç Good Job!' : 'üí™ Keep Practicing!'}</h3>
                <p>You scored ${correctCount} out of ${questions.length} (${percentage}%)</p>
                <p>${percentage >= 80 ? 'You have mastered Light & Optics!' : percentage >= 60 ? 'You have a good understanding. Review the missed concepts.' : 'Review the lesson and try again to improve your mastery.'}</p>
                ${percentage >= 60 ? '<button class="next-lesson-btn" onclick="completeLesson(' + percentage + ')">Complete & Continue</button>' : '<button class="next-lesson-btn" onclick="location.reload()">Try Again</button>'}
            `;

            document.getElementById('submitQuiz').disabled = true;
        }

        function completeLesson(score) {
            if (typeof recordLearningActivity === 'function') {
                recordLearningActivity('lesson', 'Light & Optics', score, 100);
            }
            skillTreeSystem.unlockUnit('science', 'physics', 'p5', score);

            if (window.analyticsSystem) {
                analyticsSystem.recordQuizCompletion({
                    subject: 'Physics',
                    topic: 'Light & Optics',
                    score: score,
                    maxScore: 100,
                    questionsAnswered: questions.length
                });
            }

            if (window.gamificationSystem) {
                const points = Math.floor(score / 10) * 10 + 60;
                gamificationSystem.addPoints(points, 'Completed Light & Optics');
            }

            window.dispatchEvent(new CustomEvent('unitCompleted', {
                detail: { 
                    unitId: 'p5', 
                    subject: 'science', 
                    module: 'physics',
                    score: score 
                }
            }));

            alert(`Congratulations! You've completed Light & Optics with ${score}% mastery!\n\nPoints earned: ${Math.floor(score / 10) * 10 + 60}\nCheck your Analytics Dashboard to see your progress!`);
            
            window.location.href = 'analytics-dashboard.html';
        }

        document.getElementById('submitQuiz').addEventListener('click', submitQuiz);
        renderQuiz();
    </script>
</body>
</html>
