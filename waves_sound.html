<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waves & Sound - AdaptoHub</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bai+Jamjuree:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        html, body {
            overflow: auto !important;
            height: auto !important;
        }

        .lesson-container {
            max-width: 900px;
            margin: 80px auto 40px;
            padding: 40px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .lesson-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #0097b2;
        }

        .lesson-header h1 {
            color: #0097b2;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .lesson-header .level-badge {
            display: inline-block;
            background: linear-gradient(135deg, #81c784 0%, #a5d6a7 100%);
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .lesson-content {
            margin-bottom: 40px;
        }

        .lesson-section {
            margin-bottom: 35px;
        }

        .lesson-section h2 {
            color: #0097b2;
            font-size: 1.8rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .lesson-section h3 {
            color: #333;
            font-size: 1.3rem;
            margin: 20px 0 10px;
        }

        .lesson-section p {
            color: #444;
            line-height: 1.8;
            margin-bottom: 15px;
            font-size: 1.05rem;
        }

        .concept-box {
            background: #e6f7fa;
            border-left: 4px solid #0097b2;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .concept-box h4 {
            color: #0097b2;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .formula-box {
            background: #fff3e0;
            border: 2px solid #ff9800;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .example-box {
            background: #f1f8f4;
            border-left: 4px solid #4caf50;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .example-box h4 {
            color: #4caf50;
            margin-bottom: 10px;
        }

        .quiz-section {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 12px;
            margin-top: 40px;
            border: 2px solid #0097b2;
        }

        .quiz-section h2 {
            color: #0097b2;
            text-align: center;
            margin-bottom: 25px;
        }

        .question {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
            border: 2px solid #e0e0e0;
        }

        .question.correct {
            border-color: #4caf50;
            background: #f1f8f4;
        }

        .question.incorrect {
            border-color: #f44336;
            background: #ffebee;
        }

        .question h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .option:hover {
            border-color: #0097b2;
            background: #e6f7fa;
        }

        .option.selected {
            border-color: #0097b2;
            background: #e6f7fa;
        }

        .option.correct {
            border-color: #4caf50;
            background: #f1f8f4;
        }

        .option.incorrect {
            border-color: #f44336;
            background: #ffebee;
        }

        .feedback {
            margin-top: 15px;
            padding: 12px;
            border-radius: 6px;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #f1f8f4;
            color: #2e7d32;
            border: 1px solid #4caf50;
        }

        .feedback.incorrect {
            background: #ffebee;
            color: #c62828;
            border: 1px solid #f44336;
        }

        .submit-quiz-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #0097b2 0%, #00b8d4 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .submit-quiz-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 151, 178, 0.4);
        }

        .submit-quiz-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .quiz-result {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #0097b2 0%, #00b8d4 100%);
            color: white;
            border-radius: 12px;
            margin-top: 20px;
            display: none;
        }

        .quiz-result.show {
            display: block;
        }

        .quiz-result h3 {
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .quiz-result p {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .next-lesson-btn {
            padding: 12px 30px;
            background: white;
            color: #0097b2;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 15px;
        }

        .next-lesson-btn:hover {
            background: #f0f0f0;
        }
    </style>
    <script defer src="background-customizer.js"></script>
</head>
<body>
    <header class="top-banner">
        <div class="logo">
            <img height="45px" src="assets/AdaptoHub.png" alt="Site Logo" />
            <a class="site-title" href="index.html">AdaptoHub</a>
        </div>
        <div class="header-controls">
            <div id="realTimeClock" style="font-weight: 500; color: #fff; margin-right: 15px; font-size: 0.9rem;"></div>
            <button id="darkModeToggle" style="background: none; border: none; cursor: pointer; font-size: 1.3rem; margin-right: 15px; padding: 5px;" title="Toggle dark mode">üåô</button>
        </div>
        <div class="account-display">
            <span class="account-name" id="accountName">‡∏ä‡∏ç‡∏è ‡∏ä‡∏•‡∏õ‡∏£‡∏∞‡πÄ‡∏™‡∏£‡∏¥‡∏ê‡∏™‡∏∏‡∏Ç</span>
            <div class="account-avatar" id="accountAvatar"></div>
        </div>
        </header>

    <div class="lesson-container">
        <div class="lesson-header">
            <h1>üåä Waves & Sound</h1>
            <span class="level-badge">Level 3 ‚Ä¢ Physics</span>
        </div>

        <div class="lesson-content">
            <!-- Introduction -->
            <div class="lesson-section">
                <h2>üìñ Introduction to Waves</h2>
                <p>
                    Waves are disturbances that transfer energy from one place to another without transferring matter. 
                    They are fundamental to understanding sound, light, earthquakes, and many other phenomena in nature.
                </p>
                <div class="concept-box">
                    <h4>What You'll Learn:</h4>
                    <p>‚úì Types of waves and their properties<br>
                       ‚úì Wave characteristics (wavelength, frequency, amplitude)<br>
                       ‚úì How sound waves work<br>
                       ‚úì Wave behavior (reflection, refraction, interference)</p>
                </div>
            </div>

            <!-- Wave Types -->
            <div class="lesson-section">
                <h2>üéØ Types of Waves</h2>
                
                <h3>Mechanical Waves</h3>
                <p>
                    Waves that require a medium (solid, liquid, or gas) to travel through. Examples: sound waves, 
                    water waves, seismic waves.
                </p>

                <h3>Electromagnetic Waves</h3>
                <p>
                    Waves that can travel through a vacuum (no medium needed). Examples: light, radio waves, X-rays.
                </p>

                <h3>Transverse vs Longitudinal</h3>
                <div class="concept-box">
                    <p><strong>Transverse Waves:</strong> Particles vibrate perpendicular to wave direction (e.g., light, water waves)</p>
                    <p><strong>Longitudinal Waves:</strong> Particles vibrate parallel to wave direction (e.g., sound waves)</p>
                </div>
            </div>

            <!-- Wave Properties -->
            <div class="lesson-section">
                <h2>üìä Wave Properties</h2>
                
                <h3>Wavelength (Œª)</h3>
                <p>The distance between two consecutive crests or troughs. Measured in meters.</p>

                <h3>Frequency (f)</h3>
                <p>The number of waves passing a point per second. Measured in Hertz (Hz).</p>

                <h3>Amplitude</h3>
                <p>The maximum displacement from the rest position. Greater amplitude = more energy.</p>

                <h3>Wave Speed</h3>
                <div class="formula-box">
                    v = f √ó Œª<br>
                    (velocity = frequency √ó wavelength)
                </div>

                <div class="example-box">
                    <h4>Example:</h4>
                    <p>A wave has frequency 50 Hz and wavelength 2 m:</p>
                    <p>‚Ä¢ v = f √ó Œª = 50 Hz √ó 2 m = 100 m/s</p>
                    <p>The wave travels at 100 meters per second.</p>
                </div>
            </div>

            <!-- Sound Waves -->
            <div class="lesson-section">
                <h2>üîä Sound Waves</h2>
                
                <p>
                    Sound is a longitudinal mechanical wave created by vibrations. It requires a medium to travel 
                    and cannot propagate through a vacuum.
                </p>

                <h3>Speed of Sound</h3>
                <div class="concept-box">
                    <p>‚Ä¢ In air (20¬∞C): ~343 m/s<br>
                       ‚Ä¢ In water: ~1,480 m/s<br>
                       ‚Ä¢ In steel: ~5,960 m/s<br>
                       ‚Ä¢ Speed varies with temperature and medium density</p>
                </div>

                <h3>Pitch and Loudness</h3>
                <p>
                    <strong>Pitch:</strong> Determined by frequency. Higher frequency = higher pitch.<br>
                    <strong>Loudness:</strong> Determined by amplitude. Greater amplitude = louder sound.
                </p>

                <h3>Doppler Effect</h3>
                <p>
                    The change in frequency/pitch when the source of sound or observer is moving. 
                    Approaching = higher pitch, moving away = lower pitch.
                </p>
                <div class="example-box">
                    <h4>Example:</h4>
                    <p>An ambulance siren sounds higher-pitched as it approaches you and lower-pitched 
                    as it moves away - that's the Doppler effect!</p>
                </div>
            </div>

            <!-- Wave Behavior -->
            <div class="lesson-section">
                <h2>üîÑ Wave Behavior</h2>
                
                <h3>Reflection</h3>
                <p>When a wave bounces off a surface. Example: echoes from sound waves.</p>

                <h3>Refraction</h3>
                <p>When a wave changes direction as it passes from one medium to another.</p>

                <h3>Diffraction</h3>
                <p>When waves bend around obstacles or spread through openings.</p>

                <h3>Interference</h3>
                <div class="concept-box">
                    <p><strong>Constructive Interference:</strong> Waves combine to create larger amplitude</p>
                    <p><strong>Destructive Interference:</strong> Waves cancel each other out</p>
                </div>
            </div>

            <!-- Real World Applications -->
            <div class="lesson-section">
                <h2>üåç Real-World Applications</h2>
                <p>Wave and sound principles are used in:</p>
                <ul style="color: #444; line-height: 1.8; font-size: 1.05rem;">
                    <li>Ultrasound medical imaging</li>
                    <li>Sonar for underwater navigation</li>
                    <li>Musical instruments and acoustics</li>
                    <li>Earthquake detection (seismology)</li>
                    <li>Noise-canceling headphones (destructive interference)</li>
                    <li>Wireless communication and radio</li>
                </ul>
            </div>
        </div>

        <!-- Quiz Section -->
        <div class="quiz-section">
            <h2>‚úèÔ∏è Test Your Knowledge</h2>
            <p style="text-align: center; color: #666; margin-bottom: 25px;">
                Answer these questions to demonstrate your mastery of Waves & Sound
            </p>

            <div id="quizContainer"></div>

            <button class="submit-quiz-btn" id="submitQuiz">Submit Answers</button>

            <div class="quiz-result" id="quizResult"></div>
        </div>
    </div>

    <script src="app.js"></script>
    <script src="simple-avatar.js"></script>
    <script src="learning-path.js"></script>
    <script src="analytics.js"></script>
    <script src="gamification.js"></script>
    <script>
        function updateClock(){const now=new Date();const options={weekday:'short',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit',second:'2-digit'};const clockEl=document.getElementById('realTimeClock');if(clockEl)clockEl.textContent=now.toLocaleString('en-US',options);}updateClock();setInterval(updateClock,1000);const darkModeToggle=document.getElementById('darkModeToggle');const isDark=localStorage.getItem('darkMode')==='true';if(isDark){document.documentElement.setAttribute('data-theme','dark');darkModeToggle.textContent='‚òÄÔ∏è';}darkModeToggle.addEventListener('click',()=>{const currentTheme=document.documentElement.getAttribute('data-theme');if(currentTheme==='dark'){document.documentElement.setAttribute('data-theme','light');localStorage.setItem('darkMode','false');darkModeToggle.textContent='üåô';}else{document.documentElement.setAttribute('data-theme','dark');localStorage.setItem('darkMode','true');darkModeToggle.textContent='‚òÄÔ∏è';}});
    </script>
    <script>
        const questions = [
            {
                id: 1,
                question: "What type of wave is sound?",
                options: [
                    "Transverse wave",
                    "Longitudinal wave",
                    "Electromagnetic wave",
                    "Standing wave"
                ],
                correct: 1,
                explanation: "Sound is a longitudinal wave where particles vibrate parallel to the direction of wave propagation."
            },
            {
                id: 2,
                question: "If a wave has a frequency of 100 Hz and wavelength of 3 m, what is its speed?",
                options: [
                    "33.3 m/s",
                    "300 m/s",
                    "103 m/s",
                    "97 m/s"
                ],
                correct: 1,
                explanation: "Using v = f √ó Œª: v = 100 Hz √ó 3 m = 300 m/s"
            },
            {
                id: 3,
                question: "What determines the pitch of a sound?",
                options: [
                    "Amplitude",
                    "Wavelength",
                    "Frequency",
                    "Speed"
                ],
                correct: 2,
                explanation: "Pitch is determined by frequency. Higher frequency produces higher pitch."
            },
            {
                id: 4,
                question: "The Doppler effect causes:",
                options: [
                    "Waves to speed up",
                    "A change in observed frequency when source or observer moves",
                    "Waves to reflect",
                    "Sound to travel faster"
                ],
                correct: 1,
                explanation: "The Doppler effect is the change in observed frequency/pitch when the source of sound or observer is moving."
            },
            {
                id: 5,
                question: "When two waves combine to create a larger amplitude, this is called:",
                options: [
                    "Destructive interference",
                    "Refraction",
                    "Constructive interference",
                    "Diffraction"
                ],
                correct: 2,
                explanation: "Constructive interference occurs when waves combine to create a larger amplitude."
            }
        ];

        let userAnswers = {};
        let quizSubmitted = false;

        function renderQuiz() {
            const container = document.getElementById('quizContainer');
            let html = '';

            questions.forEach((q, index) => {
                html += `
                    <div class="question" id="question${q.id}">
                        <h3>Question ${index + 1}</h3>
                        <p style="color: #333; margin-bottom: 15px; font-size: 1.05rem;">${q.question}</p>
                        <div class="options">
                            ${q.options.map((option, optIndex) => `
                                <div class="option" onclick="selectOption(${q.id}, ${optIndex})">
                                    <input type="radio" name="q${q.id}" id="q${q.id}_${optIndex}" style="margin-right: 10px;">
                                    <label for="q${q.id}_${optIndex}" style="cursor: pointer;">${option}</label>
                                </div>
                            `).join('')}
                        </div>
                        <div class="feedback" id="feedback${q.id}"></div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        function selectOption(questionId, optionIndex) {
            if (quizSubmitted) return;

            userAnswers[questionId] = optionIndex;

            const question = document.getElementById(`question${questionId}`);
            const options = question.querySelectorAll('.option');
            options.forEach((opt, idx) => {
                opt.classList.toggle('selected', idx === optionIndex);
                const radio = opt.querySelector('input');
                radio.checked = idx === optionIndex;
            });
        }

        function submitQuiz() {
            if (Object.keys(userAnswers).length < questions.length) {
                alert('Please answer all questions before submitting!');
                return;
            }

            quizSubmitted = true;
            let correctCount = 0;

            questions.forEach(q => {
                const userAnswer = userAnswers[q.id];
                const isCorrect = userAnswer === q.correct;
                
                if (isCorrect) correctCount++;

                const questionEl = document.getElementById(`question${q.id}`);
                const feedbackEl = document.getElementById(`feedback${q.id}`);
                const options = questionEl.querySelectorAll('.option');

                questionEl.classList.add(isCorrect ? 'correct' : 'incorrect');

                options.forEach((opt, idx) => {
                    if (idx === q.correct) {
                        opt.classList.add('correct');
                    } else if (idx === userAnswer && !isCorrect) {
                        opt.classList.add('incorrect');
                    }
                });

                feedbackEl.className = `feedback show ${isCorrect ? 'correct' : 'incorrect'}`;
                feedbackEl.innerHTML = `
                    ${isCorrect ? '‚úì Correct!' : '‚úó Incorrect.'} ${q.explanation}
                `;
            });

            const percentage = Math.round((correctCount / questions.length) * 100);
            
            const resultEl = document.getElementById('quizResult');
            resultEl.className = 'quiz-result show';
            resultEl.innerHTML = `
                <h3>${percentage >= 80 ? 'üéâ Excellent Work!' : percentage >= 60 ? 'üëç Good Job!' : 'üí™ Keep Practicing!'}</h3>
                <p>You scored ${correctCount} out of ${questions.length} (${percentage}%)</p>
                <p>${percentage >= 80 ? 'You have mastered Waves & Sound!' : percentage >= 60 ? 'You have a good understanding. Review the missed concepts.' : 'Review the lesson and try again to improve your mastery.'}</p>
                ${percentage >= 60 ? '<button class="next-lesson-btn" onclick="completeLesson(' + percentage + ')">Complete & Continue</button>' : '<button class="next-lesson-btn" onclick="location.reload()">Try Again</button>'}
            `;

            document.getElementById('submitQuiz').disabled = true;
        }

        function completeLesson(score) {
            if (typeof recordLearningActivity === 'function') {
                recordLearningActivity('lesson', 'Waves & Sound', score, 100);
            }
            skillTreeSystem.unlockUnit('science', 'physics', 'p4', score);

            if (window.analyticsSystem) {
                analyticsSystem.recordQuizCompletion({
                    subject: 'Physics',
                    topic: 'Waves & Sound',
                    score: score,
                    maxScore: 100,
                    questionsAnswered: questions.length
                });
            }

            if (window.gamificationSystem) {
                const points = Math.floor(score / 10) * 10 + 60;
                gamificationSystem.addPoints(points, 'Completed Waves & Sound');
            }

            window.dispatchEvent(new CustomEvent('unitCompleted', {
                detail: { 
                    unitId: 'p4', 
                    subject: 'science', 
                    module: 'physics',
                    score: score 
                }
            }));

            alert(`Congratulations! You've completed Waves & Sound with ${score}% mastery!\n\nPoints earned: ${Math.floor(score / 10) * 10 + 60}\nCheck your Analytics Dashboard to see your progress!`);
            
            window.location.href = 'analytics-dashboard.html';
        }

        document.getElementById('submitQuiz').addEventListener('click', submitQuiz);
        renderQuiz();
    </script>
</body>
</html>
